<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جدول زمانبندی پخش</title>
    
    <!-- این خط مهمترین بخش است که استایل‌ها را به صفحه متصل می‌کند -->
    <link rel="stylesheet" href="style.css">
    
    <!-- اتصال فونت وزیرمتن -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <!-- هدر اصلی صفحه که شامل جستجو است، باید داخل بادی باشد -->
    <header>
        <h1>جدول زمانبندی پخش برنامه‌ها</h1>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="کد ۴ رقمی برنامه را وارد کنید..." inputmode="numeric" maxlength="4">
            <button id="searchButton">جستجو</button>
        </div>
        <p id="searchMessage"></p> <!-- برای نمایش پیام‌ها (یافت شد/نشد) -->
    </header>

    <div class="container">
        <!-- هدر دومی که اینجا بود حذف شد چون تکراری بود -->

        <!-- بلوک زمانی ۸ تا ۱۰ -->
        <section class="schedule-block">
            <h2>ساعت ۸:۰۰ الی ۱۰:۰۰</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>تلویزیون</th>
                            <script>
                                for (let hour = 8; hour < 10; hour++) {
                                    for (let min = 0; min < 60; min += 5) {
                                        const time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
                                        document.write(`<th>${time}</th>`);
                                    }
                                }
                            </script>
                        </tr>
                    </thead>
                    <tbody>
                        <script>
                            for (let i = 1; i <= 5; i++) {
                                document.write('<tr>');
                                document.write(`<th>تلویزیون ${i}</th>`);
                                for (let j = 0; j < 24; j++) {
                                    document.write('<td></td>');
                                }
                                document.write('</tr>');
                            }
                        </script>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- بلوک زمانی ۱۰ تا ۱۲ -->
        <section class="schedule-block">
            <h2>ساعت ۱۰:۰۰ الی ۱۲:۰۰</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>تلویزیون</th>
                            <script>
                                for (let hour = 10; hour < 12; hour++) {
                                    for (let min = 0; min < 60; min += 5) {
                                        const time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
                                        document.write(`<th>${time}</th>`);
                                    }
                                }
                            </script>
                        </tr>
                    </thead>
                    <tbody>
                        <script>
                            for (let i = 1; i <= 5; i++) {
                                document.write('<tr>');
                                document.write(`<th>تلویزیون ${i}</th>`);
                                for (let j = 0; j < 24; j++) {
                                    document.write('<td></td>');
                                }
                                document.write('</tr>');
                            }
                        </script>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- بلوک زمانی ۱۲ تا ۱۴ -->
        <section class="schedule-block">
            <h2>ساعت ۱۲:۰۰ الی ۱۴:۰۰</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>تلویزیون</th>
                            <script>
                                for (let hour = 12; hour < 14; hour++) {
                                    for (let min = 0; min < 60; min += 5) {
                                        const time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
                                        document.write(`<th>${time}</th>`);
                                    }
                                }
                            </script>
                        </tr>
                    </thead>
                    <tbody>
                        <script>
                            for (let i = 1; i <= 5; i++) {
                                document.write('<tr>');
                                document.write(`<th>تلویزیون ${i}</th>`);
                                for (let j = 0; j < 24; j++) {
                                    document.write('<td></td>');
                                }
                                document.write('</tr>');
                            }
                        </script>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- بلوک زمانی ۱۴ تا ۱۶ -->
        <section class="schedule-block">
            <h2>ساعت ۱۴:۰۰ الی ۱۶:۰۰</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>تلویزیون</th>
                            <script>
                                for (let hour = 14; hour < 16; hour++) {
                                    for (let min = 0; min < 60; min += 5) {
                                        const time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
                                        document.write(`<th>${time}</th>`);
                                    }
                                }
                            </script>
                        </tr>
                    </thead>
                    <tbody>
                        <script>
                            for (let i = 1; i <= 5; i++) {
                                document.write('<tr>');
                                document.write(`<th>تلویزیون ${i}</th>`);
                                for (let j = 0; j < 24; j++) {
                                    document.write('<td></td>');
                                }
                                document.write('</tr>');
                            }
                        </script>
                    </tbody>
                </table>
            </div>
        </section>

    </div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- بخش ۱: پر کردن جدول با داده‌های نمونه ---
        const cells = document.querySelectorAll('td');
        cells.forEach(cell => {
            const randomCode = Math.floor(1000 + Math.random() * 9000);
            cell.textContent = randomCode;
        });
        if (cells.length > 50) {
            cells[50].textContent = '1234';
        }

        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const searchMessage = document.getElementById('searchMessage');

        // --- تابع جدید: برای تبدیل اعداد فارسی به انگلیسی ---
        function convertPersianToEnglish(str) {
            const persian = ["۱", "۲", "۳", "۴", "۵", "۶", "۷", "۸", "۹", "۰"];
            const english = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"];
            for (let i = 0; i < 10; i++) {
                str = str.replace(new RegExp(persian[i], "g"), english[i]);
            }
            return str;
        }

        // --- رویداد جدید: برای محدود کردن ورودی فقط به عدد (فارسی و انگلیسی) ---
        searchInput.addEventListener('input', function() {
            // هر کاراکتری که عدد انگلیسی یا فارسی نیست را حذف کن
            this.value = this.value.replace(/[^0-9۰-۹]/g, '');
        });

        // --- بخش ۲: منطق اصلی جستجو (با تغییرات) ---
        function performSearch() {
            // اعمال تابع تبدیل اعداد فارسی به انگلیسی روی ورودی کاربر
            const query = convertPersianToEnglish(searchInput.value.trim());

            const highlightedCell = document.querySelector('td.highlight');
            if (highlightedCell) {
                highlightedCell.classList.remove('highlight');
            }
            if (!query) {
                searchMessage.textContent = '';
                return;
            }
            const allCells = document.querySelectorAll('td');
            let foundCell = null;
            for (const cell of allCells) {
                if (cell.textContent.trim() === query) {
                    foundCell = cell;
                    break;
                }
            }
            if (foundCell) {
                foundCell.classList.add('highlight');
                foundCell.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center',
                    inline: 'center'
                });
                
                const cellIndex = foundCell.cellIndex;
                const table = foundCell.closest('table');
                const headerCells = table.querySelectorAll('thead th');
                const headerCell = headerCells[cellIndex];
                const time = headerCell.textContent;
                const tvRow = foundCell.parentElement.querySelector('th').textContent;
                
                searchMessage.textContent = `کد ${query} در ${tvRow} ساعت ${time} یافت شد.`;
                searchMessage.style.color = 'green';

            } else {
                searchMessage.textContent = `کد "${query}" یافت نشد.`;
                searchMessage.style.color = 'red';
            }
        }

        searchButton.addEventListener('click', performSearch);
        searchInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        });
        
        // --- بخش ۳: مدیریت سایه اسکرول ---
        document.querySelectorAll('.table-wrapper').forEach(wrapper => {
            wrapper.addEventListener('scroll', () => {
                const isScrolledToEnd = wrapper.scrollLeft + wrapper.clientWidth >= wrapper.scrollWidth - 1;
                if (isScrolledToEnd) {
                    wrapper.classList.add('scrolled-to-end');
                } else {
                    wrapper.classList.remove('scrolled-to-end');
                }
            });
        });
    });
</script>

    

</body>
</html>
