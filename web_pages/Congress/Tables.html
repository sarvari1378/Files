<!DOCTYPE html>
<html lang="fa" dir="rtl">
<header>
    <h1>جدول زمانبندی پخش برنامه‌ها</h1>
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="کد ۴ رقمی برنامه را وارد کنید...">
        <button id="searchButton">جستجو</button>
    </div>
    <p id="searchMessage"></p> <!-- برای نمایش پیام‌ها (یافت شد/نشد) -->
</header>
<body>

    <div class="container">
        <header>
            <h1>جدول زمانبندی پخش پوستر‌ها</h1>
        </header>

        <!-- بلوک زمانی ۸ تا ۱۰ -->
        <section class="schedule-block">
            <h2>ساعت ۸:۰۰ الی ۱۰:۰۰</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>تلویزیون</th>
                            <!-- تولید ستون‌های زمان با فاصله ۵ دقیقه -->
                            <script>
                                for (let hour = 8; hour < 10; hour++) {
                                    for (let min = 0; min < 60; min += 5) {
                                        const time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
                                        document.write(`<th>${time}</th>`);
                                    }
                                }
                            </script>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- تولید ۵ ردیف برای تلویزیون‌ها -->
                        <script>
                            for (let i = 1; i <= 5; i++) {
                                document.write('<tr>');
                                document.write(`<th>تلویزیون ${i}</th>`);
                                // هر تلویزیون ۲۴ اسلات ۵ دقیقه‌ای در این بازه دارد
                                for (let j = 0; j < 24; j++) {
                                    document.write('<td></td>');
                                }
                                document.write('</tr>');
                            }
                        </script>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- بلوک زمانی ۱۰ تا ۱۲ -->
        <section class="schedule-block">
            <h2>ساعت ۱۰:۰۰ الی ۱۲:۰۰</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>تلویزیون</th>
                            <script>
                                for (let hour = 10; hour < 12; hour++) {
                                    for (let min = 0; min < 60; min += 5) {
                                        const time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
                                        document.write(`<th>${time}</th>`);
                                    }
                                }
                            </script>
                        </tr>
                    </thead>
                    <tbody>
                        <script>
                            for (let i = 1; i <= 5; i++) {
                                document.write('<tr>');
                                document.write(`<th>تلویزیون ${i}</th>`);
                                for (let j = 0; j < 24; j++) {
                                    document.write('<td></td>');
                                }
                                document.write('</tr>');
                            }
                        </script>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- بلوک زمانی ۱۲ تا ۱۴ -->
        <section class="schedule-block">
            <h2>ساعت ۱۲:۰۰ الی ۱۴:۰۰</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>تلویزیون</th>
                            <script>
                                for (let hour = 12; hour < 14; hour++) {
                                    for (let min = 0; min < 60; min += 5) {
                                        const time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
                                        document.write(`<th>${time}</th>`);
                                    }
                                }
                            </script>
                        </tr>
                    </thead>
                    <tbody>
                        <script>
                            for (let i = 1; i <= 5; i++) {
                                document.write('<tr>');
                                document.write(`<th>تلویزیون ${i}</th>`);
                                for (let j = 0; j < 24; j++) {
                                    document.write('<td></td>');
                                }
                                document.write('</tr>');
                            }
                        </script>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- بلوک زمانی ۱۴ تا ۱۶ -->
        <section class="schedule-block">
            <h2>ساعت ۱۴:۰۰ الی ۱۶:۰۰</h2>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>تلویزیون</th>
                            <script>
                                for (let hour = 14; hour < 16; hour++) {
                                    for (let min = 0; min < 60; min += 5) {
                                        const time = `${String(hour).padStart(2, '0')}:${String(min).padStart(2, '0')}`;
                                        document.write(`<th>${time}</th>`);
                                    }
                                }
                            </script>
                        </tr>
                    </thead>
                    <tbody>
                        <script>
                            for (let i = 1; i <= 5; i++) {
                                document.write('<tr>');
                                document.write(`<th>تلویزیون ${i}</th>`);
                                for (let j = 0; j < 24; j++) {
                                    document.write('<td></td>');
                                }
                                document.write('</tr>');
                            }
                        </script>
                    </tbody>
                </table>
            </div>
        </section>

    </div>



    <script>
    // --- بخش ۱: پر کردن جدول با داده‌های نمونه برای تست ---
    document.addEventListener('DOMContentLoaded', function() {
        const cells = document.querySelectorAll('td');
        cells.forEach(cell => {
            // ایجاد یک عدد تصادفی بین 1000 و 9999
            const randomCode = Math.floor(1000 + Math.random() * 9000);
            cell.textContent = randomCode;
        });
        // قرار دادن یک کد مشخص برای تست آسان
        if (cells.length > 50) {
            cells[50].textContent = '1234';
        }
    });


    // --- بخش ۲: منطق اصلی جستجو ---
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const searchMessage = document.getElementById('searchMessage');

    function performSearch() {
        const query = searchInput.value.trim();

        // پاک کردن هایلایت‌های قبلی
        const highlightedCell = document.querySelector('td.highlight');
        if (highlightedCell) {
            highlightedCell.classList.remove('highlight');
        }

        // اگر ورودی خالی بود، کاری نکن
        if (!query) {
            searchMessage.textContent = '';
            return;
        }

        const allCells = document.querySelectorAll('td');
        let foundCell = null;

        // جستجو در تمام سلول‌ها برای پیدا کردن کد
        for (const cell of allCells) {
            if (cell.textContent.trim() === query) {
                foundCell = cell;
                break; // پس از پیدا کردن اولین مورد، حلقه را متوقف کن
            }
        }

        if (foundCell) {
            // اگر سلول پیدا شد:
            // ۱. هایلایت کردن سلول
            foundCell.classList.add('highlight');

            // ۲. اسکرول کردن صفحه و جدول به سمت سلول
            // این تابع هوشمندانه هم صفحه را اسکرول می‌کند و هم جدول را
            foundCell.scrollIntoView({
                behavior: 'smooth', // انیمیشن نرم برای اسکرول
                block: 'center',    // سلول را در مرکز عمودی صفحه قرار بده
                inline: 'center'    // سلول را در مرکز افقی جدول قرار بده
            });
            
            // ۳. پیدا کردن زمان مربوطه از سرستون
            const cellIndex = foundCell.cellIndex;
            const table = foundCell.closest('table');
            const headerCell = table.querySelector(`thead th:nth-child(${cellIndex + 1})`);
            const time = headerCell.textContent;

            // ۴. نمایش پیام موفقیت
            searchMessage.textContent = `کد ${query} در ساعت ${time} یافت شد.`;
            searchMessage.style.color = 'green';

        } else {
            // اگر سلول پیدا نشد:
            searchMessage.textContent = `کد "${query}" یافت نشد.`;
            searchMessage.style.color = 'red';
        }
    }

    // اجرای جستجو با کلیک روی دکمه
    searchButton.addEventListener('click', performSearch);

    // اجرای جستجو با فشردن کلید Enter در فیلد ورودی
    searchInput.addEventListener('keyup', function(event) {
        if (event.key === 'Enter') {
            performSearch();
        }
    });

</script>

    
</body>
</html>
